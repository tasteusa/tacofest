function createObject(t){function a(){}return a.prototype=t,new a}function Integration(t){this.viewName=t,this.startDate=jQuery("#start_date").val(),this.endDate=jQuery("#end_date").val(),this.chartOptions={grid:{backgroundColor:null,borderColor:{top:"#c8c8c8",left:"#c8c8c8",right:"#c8c8c8",bottom:"#c8c8c8"},borderWidth:1,hoverable:!0},legend:{show:!1},series:{lines:{show:!0},points:{fillColor:null,fill:1,radius:1.75,show:!0}},shadowSize:0,tooltip:!0,tooltipOpts:{content:function(t,a,e){return"<strong>"+e.toString()+"</strong><br>"+a}},xaxis:{mode:"categories",tickLength:0},yaxes:[{tickDecimals:0,min:0},{min:0,alignTicksWithAxis:1,position:"right"}]},"detail"===this.viewName&&(this.chartOptions.series.points.radius=3.5,this.chartOptions.xaxis.tickLength=null,this.$chartFigure=jQuery("#skystats-detail-chart-key-container"))}function GoogleAnalytics(t){Integration.call(this,t),this.integrationName="Google Analytics",this.translations="mashboard"===this.viewName?skystats_mashboard.trans:skystats_google_analytics.trans,this.selectedGoogleAccountEmail="mashboard"===this.viewName?skystats_mashboard.google_analytics.selected_google_account_email:skystats_google_analytics.selected_google_account_email,this.selectedProfileID="mashboard"===this.viewName?skystats_mashboard.google_analytics.selected_profile_id:skystats_google_analytics.selected_profile_id,this.data=null,this.$loadingContainer=jQuery("#skystats-google-analytics-loading-container"),this.$dataPointsContainer=jQuery("#skystats-google-analytics-data-points-container"),this.$dataTableColumnsContent=jQuery(".skystats-data-table-column-content"),this.loadingDataTabData=!1,this.viewingDataTab=!1,this.loadedAllData=!1,this.topKeywordsData=null,this.topSearchEngineReferralsData=null,this.topLandingPagesData=null,this.topVisitorLocationsData=null,this.chartID="skystats-google-analytics-chart",this.$chart=jQuery("#"+this.chartID),this.$chartContainer=jQuery("#skystats-google-analytics-chart-container"),this.chartInstance=null,this.frequency="daily",this.chartData=[{color:"#FFC951",data:[],label:""},{color:"#FF956C",data:[],label:""}],this.gridIconSelector="#skystats-google-analytics-grid-icon",this.$gridIcon=jQuery(this.gridIconSelector),this.gridIconContentSelector="#skystats-google-analytics-grid-icon-content",this.gridIconChildrenContent=jQuery("#skystats-google-analytics-grid-icon-content").html(),this.gridDisplayed=!1,this.gridClickEventName="click.ga_grid",this.gridMouseoverEventName="mouseover.ga_grid",this.gridMouseleaveEventName="mouseleave.ga_grid",this.gridMouseoutEventName="mouseout.ga_grid",this.$settingsIcon=jQuery("#skystats-google-analytics-settings-icon"),this.loadingSettingsTabData=!1,this.viewingSettingsTab=!1,this.$settingsTabSections=jQuery(".skystats-google-analytics-settings-tab-section"),this.$settingsTabSetupSection=jQuery("#skystats-google-analytics-settings-setup-section"),this.$settingsTabReauthorizeSection=jQuery("#skystats-google-analytics-settings-reauthorize-section"),this.$settingsTabDeauthorizeSection=jQuery("#skystats-google-analytics-settings-deauthorize-section"),this.$settingsTabNoProfilesSection=jQuery("#skystats-google-analytics-settings-no-profiles-section"),this.$settingsTabProfilesSection=jQuery("#skystats-google-analytics-settings-profiles-section"),this.$settingsTabChooseGoogleAccountSection=jQuery("#skystats-google-analytics-settings-choose-google-account-section"),this.$settingsTabAddGoogleAccountSection=jQuery("#skystats-google-analytics-settings-add-google-account-section"),this.settingsClickEventName="click.ga_settings",this.$topDataErrorContainers=jQuery(".skystats-top-data-error-container"),this.$topKeywordsDataErrorContainer=jQuery("#skystats-google-analytics-top-keywords-data-error-container"),this.$topSearchEngineReferralsDataErrorContainer=jQuery("#skystats-google-analytics-top-search-engine-referrals-data-error-container"),this.$topLandingPagesDataErrorContainer=jQuery("#skystats-google-analytics-top-landing-pages-data-error-container"),this.$topVisitorLocationsDataErrorContainer=jQuery("#skystats-google-analytics-top-visitor-locations-data-error-container"),this.authPopupWindowIntervalId=null,this.authPopupWindowURL="mashboard"===this.viewName?skystats_mashboard.google_analytics.auth_popup_window_url:skystats_google_analytics.auth_popup_window_url,this.authPopupWindowCompleteURL="mashboard"===this.viewName?skystats_mashboard.auth_popup_window_complete_url:skystats_google_analytics.auth_popup_window_complete_url}function Facebook(t){Integration.call(this,t),this.integrationName="Facebook",this.$loadingContainer=jQuery("#skystats-facebook-loading-container"),this.translations="mashboard"===this.viewName?skystats_mashboard.trans:skystats_facebook.trans,this.selectedPageID="mashboard"===this.viewName?skystats_mashboard.facebook.selected_page_id:skystats_facebook.selected_page_id,this.data=null,this.loadingDataTabData=!1,this.viewingDataTab=!1,this.loadedAllData=!1,this.topPostsData=null,this.$dataTableColumnsContent=jQuery(".skystats-data-table-column-content"),this.$dataTabContent=jQuery("#skystats-facebook-data-tab-content"),this.$dataPointsContainer=jQuery("#skystats-facebook-data-points-container"),this.chartInstance=null,this.chartID="skystats-facebook-chart",this.$chart=jQuery("#"+this.chartID),this.$chartContainer=jQuery("#skystats-facebook-chart-container"),this.chartData=[{color:"#3b5999",data:[],label:""},{color:"#5890ff",data:[],label:""}],this.gridIconSelector="#skystats-facebook-grid-icon",this.$gridIcon=jQuery(this.gridIconSelector),this.gridIconContentSelector="#skystats-facebook-grid-icon-content",this.gridIconChildrenContent=jQuery("#skystats-facebook-grid-icon-content").html(),this.gridDisplayed=!1,this.gridClickEventName="click.fb_grid",this.gridMouseoverEventName="mouseover.fb_grid",this.gridMouseleaveEventName="mouseleave.fb_grid",this.gridMouseoutEventName="mouseout.fb_grid",this.loadingSettingsTabData=!1,this.viewingSettingsTab=!1,this.$settingsIcon=jQuery("#skystats-facebook-settings-icon"),this.$settingsTabSections=jQuery(".skystats-facebook-settings-tab-section"),this.$settingsTabNoPagesSection=jQuery("#skystats-facebook-settings-no-pages-section"),this.$settingsTabPageSelectionSection=jQuery("#skystats-facebook-settings-page-selection-section"),this.$settingsTabReauthorizeSection=jQuery("#skystats-facebook-settings-reauthorize-section"),this.$settingsTabDeauthorizeSection=jQuery("#skystats-facebook-settings-deauthorize-section"),this.$settingsTabAuthorizeSection=jQuery("#skystats-facebook-settings-authorize-section"),this.settingsClickEventName="click.fb_settings",this.$topDataErrorContainers=jQuery(".skystats-top-data-error-container"),this.$topPostsDataErrorContainer=jQuery("#skystats-facebook-top-posts-data-error-container"),this.$rangeErrorContainer=jQuery("#skystats-facebook-range-error-container"),this.$rangeErrorMessage=jQuery("#skystats-facebook-range-error"),this.authPopupWindowIntervalId=null,this.authPopupWindowURL="mashboard"===this.viewName?skystats_mashboard.facebook.auth_popup_window_url:skystats_facebook.auth_popup_window_url,this.authPopupWindowCompleteURL="mashboard"===this.viewName?skystats_mashboard.auth_popup_window_complete_url:skystats_facebook.auth_popup_window_complete_url}function Twitter(t){Integration.call(this,t),this.integrationName="Twitter",this.$loadingContainer=jQuery("#skystats-twitter-loading-container"),this.translations="mashboard"===this.viewName?skystats_mashboard.trans:skystats_twitter.trans,this.data=null,this.loadingDataTabData=!1,this.viewingDataTab=!1,this.loadedAllData=!1,this.$dataTableColumnsContent=jQuery(".skystats-data-table-column-content"),this.$dataTabContent=jQuery("#skystats-twitter-data-tab-content"),this.$dataPointsContainer=jQuery("#skystats-twitter-data-points-container"),this.chartInstance=null,this.chartID="skystats-twitter-chart",this.$chart=jQuery("#"+this.chartID),this.$chartContainer=jQuery("#skystats-twitter-chart-container"),this.chartData=[{color:"#66ccff",data:[],label:""},{color:"#35d1ae",data:[],label:""}],this.gridIconSelector="#skystats-twitter-grid-icon",this.$gridIcon=jQuery(this.gridIconSelector),this.gridIconContentSelector="#skystats-twitter-grid-icon-content",this.gridIconChildrenContent=jQuery("#skystats-twitter-grid-icon-content").html(),this.gridDisplayed=!1,this.gridClickEventName="click.twitter_grid",this.gridMouseoverEventName="mouseover.twitter_grid",this.gridMouseleaveEventName="mouseleave.twitter_grid",this.gridMouseoutEventName="mouseout.twitter_grid",this.loadingSettingsTabData=!1,this.viewingSettingsTab=!1,this.$settingsIcon=jQuery("#skystats-twitter-settings-icon"),this.$settingsTabSections=jQuery(".skystats-twitter-settings-tab-section"),this.$settingsTabDeauthorizeSection=jQuery("#skystats-twitter-settings-deauthorize-section"),this.$settingsTabAuthorizeSection=jQuery("#skystats-twitter-settings-authorize-section"),this.$settingsTabValidAccessTokenSection=jQuery("#skystats-twitter-settings-valid-access-token-section"),this.$settingsTabInvalidAcccessTokenSection=jQuery("#skystats-twitter-settings-invalid-access-token-section"),this.$settingsTabRateLimitReachedSection=jQuery("#skystats-twitter-settings-rate-limit-reached-section"),this.settingsClickEventName="click.twitter_settings",this.historicalDataErrorContainer=jQuery("#skystats-twitter-historical-data-notice-container"),this.historicalDataError=jQuery("#skystats-twitter-historical-data-notice"),this.$topDataErrorContainers=jQuery(".skystats-top-data-error-container"),this.$topTweetsDataErrorContainer=jQuery("#skystats-twitter-top-tweets-data-error-container"),this.$topRetweetsDataErrorContainer=jQuery("#skystats-twitter-top-retweets-data-error-container"),this.$topMentionsDataErrorContainer=jQuery("#skystats-twitter-top-mentions-data-error-container"),this.$topFavouritesDataErrorContainer=jQuery("#skystats-twitter-top-favourites-data-error-container"),this.authPopupWindowIntervalId=null,this.authPopupWindowURL="mashboard"===this.viewName?skystats_mashboard.twitter.auth_popup_window_url:skystats_twitter.auth_popup_window_url,this.authPopupWindowCompleteURL="mashboard"===this.viewName?skystats_mashboard.auth_popup_window_complete_url:skystats_twitter.auth_popup_window_complete_url}function GoogleAdwords(t){Integration.call(this,t),this.integrationName="GoogleAdwords",this.$loadingContainer=jQuery("#skystats-google-adwords-loading-container"),this.translations="mashboard"===this.viewName?skystats_mashboard.trans:skystats_google_adwords.trans,this.selectedCustomerId="mashboard"===this.viewName?skystats_mashboard.google_adwords.selected_customer_id:skystats_google_adwords.selected_customer_id,this.selectedCampaignId="mashboard"===this.viewName?skystats_mashboard.google_adwords.selected_campaign_id:skystats_google_adwords.selected_campaign_id,this.$integrationErrorContainer=jQuery("#skystats-google-adwords-error-container"),this.currencySymbol=null,this.data=null,this.loadingDataTabData=!1,this.viewingDataTab=!1,this.loadedAllData=!1,this.$dataTableColumnsContent=jQuery(".skystats-data-table-column-content"),this.$dataTabContent=jQuery("#skystats-google-adwords-data-tab-content"),this.$dataPointsContainer=jQuery("#skystats-google-adwords-data-points-container"),this.chartInstance=null,this.chartID="skystats-google-adwords-chart",this.$chart=jQuery("#"+this.chartID),this.$chartContainer=jQuery("#skystats-google-adwords-chart-container"),this.chartData=[{color:"#4285F4",data:[],label:"Cost"},{color:"#0F9D58",data:[],label:"Avg. CPC"}],this.gridIconSelector="#skystats-google-adwords-grid-icon",this.$gridIcon=jQuery(this.gridIconSelector),this.gridIconContentSelector="#skystats-google-adwords-grid-icon-content",this.gridIconChildrenContent=jQuery("#skystats-google-adwords-grid-icon-content").html(),this.gridDisplayed=!1,this.gridClickEventName="click.google_adwords_grid",this.gridMouseoverEventName="mouseover.google_adwords_grid",this.gridMouseleaveEventName="mouseleave.google_adwords_grid",this.gridMouseoutEventName="mouseout.google_adwords_grid",this.loadingSettingsTabData=!1,this.viewingSettingsTab=!1,this.$settingsIcon=jQuery("#skystats-google-adwords-settings-icon"),this.$settingsTabSections=jQuery(".skystats-google-adwords-settings-tab-section"),this.$settingsTabDeauthorizeSection=jQuery("#skystats-google-adwords-settings-deauthorize-section"),this.$settingsTabAuthorizeSection=jQuery("#skystats-google-adwords-settings-authorize-section"),this.$settingsTabCampaignSelectionSection=jQuery("#skystats-google-adwords-campaign-selection-section"),this.$settingsTabAccountSelectionSection=jQuery("#skystats-google-adwords-account-selection-section"),this.settingsClickEventName="click.google_adwords_settings","detail"===this.viewName&&(this.$accountLevelCampaignsTableErrorContainer=jQuery("#skystats-google-adwords-account-level-campaigns-table"),this.$accountLevelTopKeywordPerformanceTableErrorContainer=jQuery("#skystats-google-adwords-account-level-top-keyword-performance"),this.$campaignLevelAdGroupsTableErrorContainer=jQuery("#skystats-google-adwords-campaign-level-ad-groups-table"),this.$campaignLevelTopKeywordPerformanceTableErrorContainer=jQuery("#skystats-google-adwords-campaign-level-top-keywords-performance"),this.$dataTableColumns=jQuery(".skystats-service-detail-data-table-column")),this.$campaignSectionDescription=jQuery("#skystats-google-adwords-select-campaign-description"),this.$campaignSectionLoadingIcon=this.$loadingContainer.clone(),this.$campaignSectionLoadingIcon.attr("id","skystats-google-adwords-campaign-selection-loading-icon"),this.$campaignSectionLoadingIcon.insertBefore(this.$settingsTabCampaignSelectionSection),this.$campaignSectionLoadingIcon.hide(),this.authPopupWindowIntervalId=null,this.authPopupWindowURL="mashboard"===this.viewName?skystats_mashboard.google_adwords.auth_popup_window_url:skystats_google_adwords.auth_popup_window_url,this.authPopupWindowCompleteURL="mashboard"===this.viewName?skystats_mashboard.auth_popup_window_complete_url:skystats_google_adwords.auth_popup_window_complete_url}function MailChimp(t){Integration.call(this,t),this.integrationName="MailChimp",this.$loadingContainer=jQuery("#skystats-mailchimp-loading-container"),this.translations="mashboard"===this.viewName?skystats_mashboard.trans:skystats_mailchimp.trans,this.$integrationErrorContainer=jQuery("#skystats-mailchimp-error-container"),this.data=null,this.loadingDataTabData=!1,this.viewingDataTab=!1,this.loadedAllData=!1,this.$dataTableColumnsContent=jQuery(".skystats-data-table-column-content"),this.$dataTabContent=jQuery("#skystats-mailchimp-data-tab-content"),this.$dataPointsContainer=jQuery("#skystats-mailchimp-data-points-container"),this.chartInstance=null,this.chartID="skystats-mailchimp-chart",this.$chart=jQuery("#"+this.chartID),this.$chartContainer=jQuery("#skystats-mailchimp-chart-container"),this.chartData=[{color:"#FEBE12",data:[],label:"Unique Opens"},{color:"#4f9ad8",data:[],label:"Unique Clicks"}],this.gridIconSelector="#skystats-mailchimp-grid-icon",this.$gridIcon=jQuery(this.gridIconSelector),this.gridIconContentSelector="#skystats-mailchimp-grid-icon-content",this.gridIconChildrenContent=jQuery("#skystats-mailchimp-grid-icon-content").html(),this.gridDisplayed=!1,this.gridClickEventName="click.mailchimp_grid",this.gridMouseoverEventName="mouseover.mailchimp_grid",this.gridMouseleaveEventName="mouseleave.mailchimp_grid",this.gridMouseoutEventName="mouseout.mailchimp_grid",this.loadingSettingsTabData=!1,this.viewingSettingsTab=!1,this.$settingsIcon=jQuery("#skystats-mailchimp-settings-icon"),this.$settingsTabSections=jQuery(".skystats-mailchimp-settings-tab-section"),this.$settingsTabAuthorizeSection=jQuery("#skystats-mailchimp-settings-authorize-section"),this.$settingsTabDeauthorizeSection=jQuery("#skystats-mailchimp-settings-deauthorize-section"),this.$settingsTabValidAccessTokenSection=jQuery("#skystats-mailchimp-settings-valid-access-token-section"),this.$settingsTabInvalidAccessTokenSection=jQuery("#skystats-mailchimp-settings-invalid-access-token-section"),this.settingsClickEventName="click.mailchimp_settings","detail"===this.viewName&&(this.$dataTableColumns=jQuery(".skystats-service-detail-data-table-column"),this.$topCampaignsTableErrorContainer=jQuery("#skystats-mailchimp-top-campaigns-data-error-container"),this.$topListsTableErrorContainer=jQuery("#skystats-mailchimp-top-lists-data-error-container")),this.authPopupWindowIntervalId=null,this.authPopupWindowURL="mashboard"===this.viewName?skystats_mashboard.mailchimp.auth_popup_window_url:skystats_mailchimp.auth_popup_window_url,this.authPopupWindowCompleteURL="mashboard"===this.viewName?skystats_mashboard.auth_popup_window_complete_url:skystats_mailchimp.auth_popup_window_complete_url}function getIntegration(t,a){switch(t){case"googleAnalytics":return new GoogleAnalytics(a);case"facebook":return new Facebook(a);case"twitter":return new Twitter(a);case"googleAdwords":return new GoogleAdwords(a);case"mailchimp":return new MailChimp(a)}}function getIntegrations(t,a){var e=[];return a.hasOwnProperty("googleanalytics_1")&&"1"==a.googleanalytics_1&&e.push(new GoogleAnalytics(t)),a.hasOwnProperty("facebook_2")&&"1"==a.facebook_2&&e.push(new Facebook(t)),a.hasOwnProperty("twitter_3")&&"1"==a.twitter_3&&e.push(new Twitter(t)),a.hasOwnProperty("googleadwords_11")&&"1"==a.googleadwords_11&&e.push(new GoogleAdwords(t)),a.hasOwnProperty("mailchimp_8")&&"1"==a.mailchimp_8&&e.push(new MailChimp(t)),e}function initTooltips(){jQuery(".skystats-tooltip").each(function(){var t=jQuery(this);return t.hasClass("skystats-disabled")?!0:void t.tooltip({content:t.attr("data-tooltip"),items:"[data-tooltip]"})})}function makeCardsSortable(t,a){var e=".skystats-cards-column",o=jQuery(e);o.sortable({connectWith:e,cursor:"move",forcePlaceholderSize:!0,handle:".skystats-card-drag-icon",placeholder:"skystats-card-placeholder",revert:400,stop:function(){var e={};o.each(function(t,a){var o=jQuery(a).attr("id");e[o]=jQuery(a).sortable("toArray")});for(var i=0;a>i;++i)t[i].resizeChart();jQuery.post(ajaxurl,{action:"skystats_ajax_save_mashboard_card_positions",data:e})}})}Integration.prototype.showChartFigure=function(){"detail"===this.viewName&&this.$chartFigure.show()},Integration.prototype.hideChartFigure=function(){"detail"===this.viewName&&this.$chartFigure.hide()},Integration.prototype.updateDataTabData=function(t){var a=jQuery("#skystats-page-error-container");if(t||a.fadeOut(),"Facebook"===this.integrationName){var e=jQuery("#skystats-facebook-error-container");e.fadeOut(),this.$rangeErrorContainer.fadeOut()}if(this.startDate=jQuery("#start_date").val(),this.endDate=jQuery("#end_date").val(),"googleAnalytics"===this.integrationName&&"detail"===this.viewName&&(this.frequency=jQuery("#frequency").val()),!this.viewingSettingsTab&&!this.loadingSettingsTabData){var o=new Date(this.startDate),i=o.getTime()/1e3,s=new Date(this.endDate),n=s.getTime()/1e3,r=1104534e3,c=(s-o)/1e3+86400,d=c/60/60/24,l=a.find("> p"),h=!1;if(1>=d&&this.startDate!==this.endDate)l.html(this.translations.date_range_same),h=!0;else if(c>Date.now())l.html(this.translations.date_range_exceeds_today),h=!0;else if(r>i||r>n)l.html(this.translations.date_range_below_min),h=!0;else if("Facebook"===this.integrationName&&d>91){var g=this.$rangeErrorMessage.find("a");g.attr("data-tooltip",this.translations.date_range_exceeds_limit),g.tooltip({content:g.attr("data-tooltip"),items:"[data-tooltip]"}),this.$rangeErrorContainer.fadeIn()}if(h)return void(t||a.fadeIn());this.data=null,"detail"===this.viewName&&(this.loadedAllData=!1),setGlobalPossibleMarkers(null),this.disableGridIcon(),this.disableSettingsIcon(),this.hideChartFigure(),this.loadDataTabData()}},Integration.prototype.resizeChart=function(){},Integration.prototype.reinitGridChildrenContent=function(){this.gridIconChildrenContent=jQuery(this.gridIconContentSelector).html()},Integration.prototype.enableGridIcon=function(){this.$gridIcon.removeClass("skystats-disabled"),this.$gridIcon.tooltip({content:this.$gridIcon.attr("data-tooltip"),items:"[data-tooltip]"});var t=this;this.$gridIcon.on(this.gridClickEventName,function(){var a="";if(!0===t.gridDisplayed)a=t.$gridIcon.attr("data-tooltip"),t.$gridIcon.tooltip("option","content",a),t.gridDisplayed=!1;else{t.$gridIcon.removeClass("skystats-tooltip"),t.gridDisplayed=!0;var e=jQuery(t.gridIconContentSelector).find("input");e.each(function(t,a){var e=jQuery(a);jQuery("#"+e.val()).is(":visible")?e.attr("checked",!0):e.attr("checked",!1)}),t.reinitGridChildrenContent(),a=t.gridIconChildrenContent,t.$gridIcon.tooltip("destroy"),t.$gridIcon.tooltip({content:a,items:t.gridIconSelector}),t.$gridIcon.tooltip("open"),jQuery(".skystats-show-data-point").change(function(){var t=jQuery(this);this.checked?(jQuery("#"+t.val()).show(),t.attr("checked",!0)):(jQuery("#"+t.val()).hide(),t.attr("checked",!1))})}}),this.$gridIcon.on(this.gridMouseoverEventName+" "+this.gridMouseleaveEventName+" "+this.gridMouseoutEventName,function(a){!0===t.gridDisplayed&&a.stopImmediatePropagation()})},Integration.prototype.disableGridIcon=function(){this.$gridIcon.addClass("skystats-disabled");var t=this.$gridIcon.tooltip("instance");null!=t&&t.destroy(),this.$gridIcon.off(this.gridClickEventName+" "+this.gridMouseoverEventName+" "+this.gridMouseleaveEventName+" "+this.gridMouseoutEventName),this.gridDisplayed=!1},Integration.prototype.enableSettingsIcon=function(){if(!0!==this.settingsIconEnabled){var t=this;this.$settingsIcon.removeClass("skystats-disabled"),this.$settingsIcon.tooltip({content:this.$settingsIcon.attr("data-tooltip"),items:"[data-tooltip]"}),this.settingsIconEnabled=!0,this.$settingsIcon.on(this.settingsClickEventName,function(){if(!0===t.viewingSettingsTab){if(!0===t.loadingDataTabData)return;t.viewingSettingsTab=!1,t.loadingDataTabData=!0,t.disableSettingsIcon(),t.loadDataTabData()}else if(!0===t.viewingDataTab){if(!0===t.loadingSettingsTabData)return;t.viewingDataTab=!1,t.loadingSettingsTabData=!0,t.disableGridIcon(),t.disableSettingsIcon(),t.loadSettingsTabData("cached")}})}},Integration.prototype.disableSettingsIcon=function(){!1!==this.settingsIconEnabled&&(this.$settingsIcon.hasClass("skystats-disabled")||(this.$settingsIcon.addClass("skystats-disabled"),this.$settingsIcon.tooltip("destroy"),this.$settingsIcon.off(this.settingsClickEventName),this.settingsIconEnabled=!1))},Integration.prototype.changeTooltipContent=function(t,a){var e=null;e=t instanceof jQuery?t.tooltip("instance"):jQuery(t).tooltip("instance"),null!=e&&e.option("content",a)},Integration.prototype.createPopupWindow=function(t,a,e,o,i){var s=screen.width/2-e/2,n=screen.height/2-o/2;null==i&&(i="toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+e+", height="+o+", top="+n+", left="+s),this.popupWindow=window.open(t,a,i)},GoogleAnalytics.prototype=createObject(Integration.prototype),GoogleAnalytics.prototype.constructor=GoogleAnalytics,GoogleAnalytics.prototype.resizeChart=function(){null!=this.data&&(setGlobalPossibleMarkers(null),this.chartInstance.shutdown(),this.chartData[0].data=getChartData(this.data.chart_data.users,this.$chart,this,this.frequency),this.chartData[1].data=getChartData(this.data.chart_data.page_views,this.$chart,this,this.frequency),this.chartInstance=this.$chart.plot(this.chartData,this.chartOptions).data("plot"))},GoogleAnalytics.prototype.loadDataTabData=function(){var t=jQuery("#frequency");t.length&&(this.frequency=t.val()),"detail"===this.viewName&&this.$topDataErrorContainers.fadeOut(),this.viewingSettingsTab=!1,this.loadingDataTabData=!0;var a=this;this.$settingsTabSections.add(this.$chartContainer).add(this.$dataPointsContainer).add(this.$dataTableColumnsContent).fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){if("mashboard"===a.viewName){if(a.data)return void a.displayDataTabData();jQuery.get(ajaxurl,{action:"skystats_ajax_google_analytics_api_query",query:"get_mashboard_view_data",start_date:a.startDate,end_date:a.endDate},function(t){t=jQuery.parseJSON(t),"success"===t.responseType?(a.data=t.data,a.displayDataTabData(t)):a.loadSettingsTabData("fresh")})}else if("detail"===a.viewName)if(a.loadedAllData)a.displayDataTabData();else{var t=a.getDetailViewDataDeferredObject(),e=a.getTopKeywordsDeferredObject(),o=a.getTopSearchEngineReferralsDeferredObject(),i=a.getTopLandingPagesDeferredObject(),s=a.getTopVisitorLocationsDeferredObject();jQuery.when(t,e,o,i,s).done(function(t,e,o,i,s){var n=jQuery.parseJSON(t[0]);"error"===n.responseType?a.loadSettingsTabData("fresh"):(a.loadedAllData=!0,a.data=jQuery.parseJSON(t[0]).data,a.topKeywordsData=jQuery.parseJSON(e[0]).data,a.topSearchEngineReferralsData=jQuery.parseJSON(o[0]).data,a.topLandingPagesData=jQuery.parseJSON(i[0]).data,a.topVisitorLocationsData=jQuery.parseJSON(s[0]).data,a.displayDataTabData())})}})})},GoogleAnalytics.prototype.getDetailViewDataDeferredObject=function(){return jQuery.get(ajaxurl,{action:"skystats_ajax_google_analytics_api_query",query:"get_detail_view_data",start_date:this.startDate,end_date:this.endDate,frequency:this.frequency})},GoogleAnalytics.prototype.getTopKeywordsDeferredObject=function(){return jQuery.get(ajaxurl,{action:"skystats_ajax_get_google_analytics_top_data",data_type:"keywords",start_date:this.startDate,end_date:this.endDate})},GoogleAnalytics.prototype.getTopSearchEngineReferralsDeferredObject=function(){return jQuery.get(ajaxurl,{action:"skystats_ajax_get_google_analytics_top_data",data_type:"search_engine_referrals",start_date:this.startDate,end_date:this.endDate})},GoogleAnalytics.prototype.getTopLandingPagesDeferredObject=function(){return jQuery.get(ajaxurl,{action:"skystats_ajax_get_google_analytics_top_data",data_type:"landing_pages",start_date:this.startDate,end_date:this.endDate})},GoogleAnalytics.prototype.getTopVisitorLocationsDeferredObject=function(){return jQuery.get(ajaxurl,{action:"skystats_ajax_get_google_analytics_top_data",data_type:"visitor_locations",start_date:this.startDate,end_date:this.endDate})},GoogleAnalytics.prototype.displayDataTabData=function(){var t=this;"detail"===this.viewName&&this.$topDataErrorContainers.fadeOut(),this.$loadingContainer.fadeOut(400,function(){t.showChartFigure(),t.$chartContainer.show(),t.$dataPointsContainer.show(),null!==t.chartInstance&&t.chartInstance.shutdown(),t.chartData[0].data=getChartData(t.data.chart_data.users,t.$chart,t,t.frequency),t.chartData[1].data=getChartData(t.data.chart_data.page_views,t.$chart,t,t.frequency),t.chartInstance=t.$chart.plot(t.chartData,t.chartOptions).data("plot"),jQuery("#skystats-google-analytics-users-total").html(t.data.users),jQuery("#skystats-google-analytics-users-change").html(t.data.users_change);var a=jQuery("#skystats-google-analytics-users-change-info");t.changeTooltipContent(a,t.data.previous_users+" "+a.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-analytics-users-change-direction",t.data.users_change_direction,!1),setDataPointChangeClass("skystats-google-analytics-users-change",t.data.users_change_direction,!1),jQuery("#skystats-google-analytics-page-views-total").html(t.data.page_views),jQuery("#skystats-google-analytics-page-views-change").html(t.data.page_views_change);var e=jQuery("#skystats-google-analytics-page-views-change-info");if(t.changeTooltipContent(e,t.data.previous_page_views+" "+e.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-analytics-page-views-change-direction",t.data.page_views_change_direction,!1),setDataPointChangeClass("skystats-google-analytics-page-views-change",t.data.page_views_change_direction,!1),"mashboard"===t.viewName){var o=jQuery("#skystats-google-analytics-bounce-rate");o.html("");var i=jQuery("#skystats-google-analytics-bounce-rate-data-point"),s=!1;i.is(":visible")||(s=!0,i.show());var n=Morris.Donut({data:[{label:t.data.bounce_rate+"%",value:t.data.bounce_rate},{label:t.data.bounce_rate_change+"%",value:100-t.data.bounce_rate}],element:"skystats-google-analytics-bounce-rate",colors:["#72aa3f","#ffffff"],resize:!1,formatter:function(){return"negative"===t.data.bounce_rate_change_direction?"▽"+t.data.bounce_rate_change:"positive"===t.data.bounce_rate_change_direction?"Δ+"+t.data.bounce_rate_change:t.data.bounce_rate_change}});n.select(0);var r=o.find("svg"),c=r.children();c.eq(2).css("stroke","none").end().eq(3).css("stroke","none").end().eq(4).css("stroke","none").end().eq(5).css("stroke","none").css("fill","#eeeeee");var d=c.eq(6);d.html("<tspan>"+t.data.bounce_rate+'</tspan><tspan dy="-7" dx="0" style="font-size:16px;">%</tspan>'),d.attr("class","skystats-donut-value"),d.attr("font-size","25px"),d.attr("y","70"),r.css("left","-10%");var l=c.eq(7).find("tspan");switch(t.data.bounce_rate_change_direction){case"positive":l.attr("class","skystats-data-point-change skystats-data-point-change-negative");break;case"negative":l.attr("class","skystats-data-point-change skystats-data-point-change-positive");break;default:l.attr("class","skystats-data-point-change")}setDataPointChangeDirectionClass("skystats-google-analytics-bounce-rate-change-direction",t.data.bounce_rate_change_direction,!1),l.attr("fill",l.css("color")).css("font-size","19px").attr("dy","6");var h=jQuery('<tspan dy="-4" dx="2" fill="'+l.css("color")+'" style="font-size: 12px;">%</tspan>');h.appendTo(l),o.html(o.html()),l=null,s&&i.is(":visible")&&i.hide()}if("detail"===t.viewName){jQuery("#skystats-google-analytics-pages-per-visit-total").html(t.data.pages_per_visit),jQuery("#skystats-google-analytics-pages-per-visit-change").html(t.data.pages_per_visit_change);var g=jQuery("#skystats-google-analytics-pages-per-visit-change-info");t.changeTooltipContent(g,t.data.previous_pages_per_visit+" "+g.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-analytics-pages-per-visit-change-direction",t.data.pages_per_visit_change_direction,!1),setDataPointChangeClass("skystats-google-analytics-pages-per-visit-change",t.data.pages_per_visit_change_direction,!1),jQuery("#skystats-google-analytics-average-visit-duration-total").html(t.data.average_visit_duration),jQuery("#skystats-google-analytics-average-visit-duration-change").html(t.data.average_visit_duration_change);var u=jQuery("#skystats-google-analytics-average-visit-duration-change-info");t.changeTooltipContent(u,t.data.previous_average_visit_duration+" "+u.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-analytics-average-visit-duration-change-direction",t.data.average_visit_duration_change_direction,!1),setDataPointChangeClass("skystats-google-analytics-average-visit-duration-change",t.data.average_visit_duration_change_direction,!1);var p=jQuery("#skystats-google-analytics-bounce-rate-total");p.html(t.data.bounce_rate),l=jQuery("#skystats-google-analytics-bounce-rate-change"),l.html(t.data.bounce_rate_change);var y=jQuery("#skystats-google-analytics-bounce-rate-change-info");t.changeTooltipContent(y,t.data.previous_bounce_rate+" "+y.attr("data-tooltip-backup"));if("neutral"===t.data.bounce_rate_change_direction)setDataPointChangeDirectionClass("skystats-google-analytics-bounce-rate-change-direction","neutral",!1),setDataPointChangeClass("skystats-google-analytics-bounce-rate-change","neutral",!1);else{var _=jQuery("#skystats-google-analytics-bounce-rate-change-direction");"positive"===t.data.bounce_rate_change_direction?(l.attr("class","skystats-data-point-change skystats-data-point-change-increase-negative"),_.attr("class","skystats-data-point-change-direction-increase-negative")):"negative"===t.data.bounce_rate_change_direction&&(l.attr("class","skystats-data-point-change skystats-data-point-change-decrease-positive"),_.attr("class","skystats-data-point-change-direction-decrease-positive"))}!function(){var a=jQuery("#skystats-google-analytics-top-keywords-data-table"),e=a.find("> tbody");if(null!=t.topKeywordsData&&t.topKeywordsData.length){e.html("");var o="";jQuery.each(t.topKeywordsData,function(t,a){
	o+="<tr><td>"+a.keyword+"</td><td>"+a.visits+"</td><td>"+a.percent+"</td></tr>"}),jQuery(o).appendTo(e),a.show()}else a.hide(),t.$topKeywordsDataErrorContainer.show();jQuery("#skystats-detail-google-analytics-top-keywords-data-table-column-content").fadeIn()}(),function(){var a=jQuery("#skystats-google-analytics-top-search-engine-referrals-data-table"),e=a.find("> tbody");if(null!=t.topSearchEngineReferralsData&&t.topSearchEngineReferralsData.length){e.html("");var o="";jQuery.each(t.topSearchEngineReferralsData,function(t,a){o+="<tr><td>"+a.search_engine+"</td><td>"+a.visits+"</td><td>"+a.percent+"</td></tr>"}),jQuery(o).appendTo(e),a.show()}else a.hide(),t.$topSearchEngineReferralsDataErrorContainer.show();jQuery("#skystats-detail-google-analytics-top-search-engine-referrals-data-table-column-content").fadeIn()}(),function(){var a=jQuery("#skystats-google-analytics-top-landing-pages-data-table"),e=a.find("> tbody");if(null!=t.topLandingPagesData&&t.topLandingPagesData.length){e.html("");var o="";jQuery.each(t.topLandingPagesData,function(t,a){o+="<tr><td>"+a.page+"</td><td>"+a.visits+"</td><td>"+a.percent+"</td></tr>"}),jQuery(o).appendTo(e),a.show()}else a.hide(),t.$topLandingPagesDataErrorContainer.show();jQuery("#skystats-detail-google-analytics-top-landing-pages-data-table-column-content").fadeIn()}(),function(){var a=jQuery("#skystats-google-analytics-visitor-locations-data-table"),e=a.find("> tbody");if(null!=t.topVisitorLocationsData&&t.topVisitorLocationsData.length){e.html("");var o="";jQuery.each(t.topVisitorLocationsData,function(t,a){o+="<tr><td>"+a.country+"</td><td>"+a.visits+"</td><td>"+a.percent+"</td></tr>"}),jQuery(o).appendTo(e),a.show()}else a.hide(),t.$topVisitorLocationsDataErrorContainer.show();jQuery("#skystats-detail-google-analytics-top-visitor-locations-data-table-column-content").fadeIn()}()}jQuery("#skystats-google-analytics-search-engine-visits-total").html(t.data.search_engine_visits),jQuery("#skystats-google-analytics-search-engine-visits-change").html(t.data.search_engine_visits_change);var f=jQuery("#skystats-google-analytics-search-engine-visits-change-info");t.changeTooltipContent(f,t.data.previous_search_engine_visits+" "+f.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-analytics-search-engine-visits-change-direction",t.data.search_engine_visits_change_direction,!1),setDataPointChangeClass("skystats-google-analytics-search-engine-visits-change",t.data.search_engine_visits_change_direction,!1),t.enableGridIcon(),t.enableSettingsIcon(),t.loadingDataTabData=!1,t.viewingDataTab=!0})},GoogleAnalytics.prototype.enableGridIcon=function(){Integration.prototype.enableGridIcon.call(this)},GoogleAnalytics.prototype.disableGridIcon=function(){Integration.prototype.disableGridIcon.call(this)},GoogleAnalytics.prototype.enableSettingsIcon=function(){Integration.prototype.enableSettingsIcon.call(this)},GoogleAnalytics.prototype.disableSettingsIcon=function(){Integration.prototype.disableSettingsIcon.call(this)},GoogleAnalytics.prototype.loadSettingsTabData=function(t){this.hideChartFigure(),this.$topDataErrorContainers.fadeOut();var a=this,e="mashboard"===this.viewName?this.$dataPointsContainer.add(this.$chartContainer):this.$dataPointsContainer.add(this.$chartContainer).add(this.$dataTableColumnsContent);e.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.get(ajaxurl,{action:"skystats_ajax_google_analytics_api_query",query:"get_profiles",request_type:t},function(t){t=jQuery.parseJSON(t),a.displaySettingsTabData(t)})})})},GoogleAnalytics.prototype.getGoogleAccounts=function(){var t=this;jQuery.get(ajaxurl,{action:"skystats_ajax_google_analytics_api_query",query:"get_google_accounts"},function(a){a=jQuery.parseJSON(a),t.$loadingContainer.fadeOut(400,function(){if("success"===a.responseType){var e=jQuery("#skystats-google-analytics-google-accounts"),o="";jQuery.each(a.data,function(a,e){var i=e.toString(),s=t.selectedGoogleAccountEmail==e?'selected="selected"':"";o+='<option value="'+i+'" '+s+">"+i+"</option>"}),e.html(o),t.$settingsTabChooseGoogleAccountSection.fadeIn(),e.chosen({max_selected_options:1,width:"100%"}),e.trigger("chosen:updated");var i=jQuery("#skystats-google-analytics-save-google-account");i.off("click"),i.one("click",function(a){a.preventDefault(),t.disableSettingsIcon();var o=e.val();t.selectedGoogleAccountEmail=o,t.$settingsTabSections.fadeOut(400).promise().done(function(){t.$loadingContainer.fadeIn(400,function(){jQuery.post(ajaxurl,{action:"skystats_ajax_google_analytics_save_google_account_email",email:o},function(){t.loadSettingsTabData("cached")})})})})}t.$settingsTabAddGoogleAccountSection.fadeIn(),t.$loadingContainer.fadeOut(),t.registerAuthorizationClickHandler()})})},GoogleAnalytics.prototype.displaySettingsTabData=function(t){var a=this;return"error"===t.responseType&&"missing_google_account"===t.responseContext?void a.getGoogleAccounts():void a.$loadingContainer.fadeOut(400,function(){if("success"===t.responseType){var e="",o=jQuery("#ga-profiles");jQuery.each(t.data,function(t,o){jQuery.each(o,function(t,o){e+='<optgroup label="'+t+'">',jQuery.each(o,function(t,o){var i=a.selectedProfileID==o.id?'selected="selected"':"";e+='<option value="'+o.id.toString()+'" '+i+">"+o.name.toString()+"</option>"}),e+="</optgroup>"})}),o.html(e),a.$settingsTabProfilesSection.fadeIn(),o.chosen({max_selected_options:1,width:"100%"});var i=jQuery("#save_ga_profile");i.off("click"),i.one("click",function(t){t.preventDefault(),a.disableSettingsIcon();var e=o.val();a.selectedProfileID=e,a.$settingsTabSections.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.post(ajaxurl,{action:"skystats_ajax_google_analytics_save_profile_id",profile_id:e},function(){a.data=null,"detail"===a.viewName&&(a.loadedAllData=!1),a.loadDataTabData()})})})}),a.$settingsTabDeauthorizeSection.fadeIn()}else switch(t.responseContext){case"authorization_required":a.$settingsTabSetupSection.fadeIn();break;case"reauthorization_required":a.$settingsTabReauthorizeSection.fadeIn();break;case"no_profiles":a.$settingsTabNoProfilesSection.fadeIn(),a.$settingsTabDeauthorizeSection.fadeIn();break;default:a.$settingsTabDeauthorizeSection.fadeIn()}if(a.viewingSettingsTab=!0,a.loadingSettingsTabData=!1,null!=a.data&&a.enableSettingsIcon(),a.$settingsTabSetupSection.is(":visible")){var s=jQuery("#skystats-google-analytics-authorize");s.off("click"),s.on("click",function(t){t.preventDefault();var e=a.$settingsTabSetupSection;e.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){a.getGoogleAccounts()})})})}if(a.registerAuthorizationClickHandler(),a.$settingsTabDeauthorizeSection.is(":visible")){var n=jQuery("#skystats-google-analytics-deauthorize"),r=jQuery("#skystats-google-analytics-deauthorize-account-license-wide"),c=jQuery("#skystats-google-analytics-deauthorize-accounts-license-wide");n.off("click"),n.one("click",function(t){t.preventDefault(),a.disableSettingsIcon(),a.$settingsTabSections.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.post(ajaxurl,{action:"skystats_ajax_google_analytics_deauthorize"},function(){a.data=null,a.viewingSettingsTab=!1,a.loadingSettingsTabData=!0,a.loadSettingsTabData("fresh")})})})}),r.off("click"),r.on("click",function(t){t.preventDefault(),a.$settingsTabSections.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.post(ajaxurl,{action:"skystats_ajax_google_analytics_deauthorize",deauthorize_type:"deauthorizeAccountLicenseWide"},function(){a.data=null,a.viewingSettingsTab=!1,a.loadingSettingsTabData=!0,a.loadSettingsTabData("fresh")})})})}),c.off("click"),c.on("click",function(t){t.preventDefault(),a.$settingsTabSections.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.post(ajaxurl,{action:"skystats_ajax_google_analytics_deauthorize",deauthorize_type:"deauthorizeAllAccountsLicenseWide"},function(){a.data=null,a.viewingSettingsTab=!1,a.loadingSettingsTabData=!0,a.loadSettingsTabData("fresh")})})})})}})},GoogleAnalytics.prototype.registerAuthorizationClickHandler=function(){var t=this;if(t.$settingsTabAddGoogleAccountSection.is(":visible")||t.$settingsTabReauthorizeSection.is(":visible")){var a=jQuery("#skystats-google-analytics-add-google-account, #skystats-google-analytics-reauthorize");a.off("click"),a.on("click",function(a){a.preventDefault(),t.selectedGoogleAccountEmail=null,jQuery.post(ajaxurl,{action:"skystats_ajax_google_analytics_reset_google_account_email"}),t.selectedGoogleAccountEmail=null,null!=t.authPopupWindowIntervalId&&clearInterval(t.authPopupWindowIntervalId),t.createPopupWindow(t.authPopupWindowURL,"GoogleAnalyticsAuthPopup",900,500,null),t.authPopupWindowIntervalId=setInterval(function(){try{(null==t.popupWindow||t.popupWindow.closed)&&clearInterval(t.authPopupWindowIntervalId),(t.authPopupWindowCompleteURL===t.popupWindow.location.href||t.authPopupWindowCompleteURL+"#"===t.popupWindow.location.href)&&(t.popupWindow.close(),clearInterval(t.authPopupWindowIntervalId),t.$settingsTabSections.fadeOut(400).promise().done(function(){t.loadSettingsTabData("fresh")}))}catch(a){}},100)})}},GoogleAnalytics.prototype.updateDataTabData=function(t){Integration.prototype.updateDataTabData.call(this,t)},Facebook.prototype=createObject(Integration.prototype),Facebook.prototype.constructor=Facebook,Facebook.prototype.loadDataTabData=function(){this.hideChartFigure(),this.viewingSettingsTab=!1,this.loadingDataTabData=!0;var t=this;this.$topDataErrorContainers.fadeOut(),this.$settingsTabSections.add(this.$chartContainer).add(this.$dataPointsContainer).add(this.$dataTableColumnsContent).fadeOut(400).promise().done(function(){t.$loadingContainer.fadeIn(400,function(){if("mashboard"===t.viewName){if(null!=t.data)return void t.displayDataTabData();jQuery.get(ajaxurl,{action:"skystats_ajax_facebook_get_mashboard_view_data",start_date:t.startDate,end_date:t.endDate},function(a){a=jQuery.parseJSON(a),null!=a.data?(t.data=a.data,t.displayDataTabData()):t.loadSettingsTabData("fresh")})}else if("detail"===t.viewName)if(!0===t.loadedAllData)t.displayDataTabData();else{var a=t.getDetailViewDataDeferredObject(),e=t.getTopPostsDeferredObject();jQuery.when(a,e).done(function(a,e){var o=jQuery.parseJSON(a[0]);"error"===o.responseType?t.loadSettingsTabData("fresh"):(t.loadedAllData=!0,t.data=jQuery.parseJSON(a[0]).data,t.topPostsData=jQuery.parseJSON(e[0]).data,t.displayDataTabData())})}})})},Facebook.prototype.getDetailViewDataDeferredObject=function(){return jQuery.get(ajaxurl,{action:"skystats_ajax_facebook_get_detail_view_data",start_date:this.startDate,end_date:this.endDate})},Facebook.prototype.getTopPostsDeferredObject=function(){return jQuery.get(ajaxurl,{action:"skystats_ajax_facebook_get_page_top_posts",start_date:this.startDate,end_date:this.endDate})},Facebook.prototype.displayDataTabData=function(){var t=this;"detail"===this.viewName&&this.$topDataErrorContainers.fadeOut(),this.$loadingContainer.fadeOut(400,function(){t.showChartFigure(),t.$dataTabContent.fadeIn(),t.$chartContainer.show(),null!==t.chartInstance&&t.chartInstance.shutdown(),t.chartData[0].data=getChartData(t.data.chart_data.likes,t.$chart,t,t.frequency),t.chartData[1].data=getChartData(t.data.chart_data.reach,t.$chart,t,t.frequency),t.chartInstance=t.$chart.plot(t.chartData,t.chartOptions).data("plot"),t.$dataPointsContainer.show(),jQuery("#skystats-facebook-total-likes-total").html(t.data.total_likes),jQuery("#skystats-facebook-total-likes-change").html(t.data.total_likes_change);var a=jQuery("#skystats-facebook-total-likes-change-info");t.changeTooltipContent(a,t.data.previous_total_likes+" "+a.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-facebook-total-likes-change-direction",t.data.total_likes_change_direction,!1),setDataPointChangeClass("skystats-facebook-total-likes-change",t.data.total_likes_change_direction,!1),jQuery("#skystats-facebook-total-reach-total").html(t.data.total_reach),jQuery("#skystats-facebook-total-reach-change").html(t.data.total_reach_change);var e=jQuery("#skystats-facebook-total-reach-change-info");t.changeTooltipContent(e,t.data.previous_total_reach+" "+e.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-facebook-total-reach-change-direction",t.data.total_reach_change_direction,!1),setDataPointChangeClass("skystats-facebook-total-reach-change",t.data.total_reach_change_direction,!1),jQuery("#skystats-facebook-page-visits-total").html(t.data.page_views),jQuery("#skystats-facebook-page-visits-change").html(t.data.page_views_change);var o=jQuery("#skystats-facebook-page-visits-change-info");t.changeTooltipContent(o,t.data.previous_page_views+" "+o.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-facebook-page-visits-change-direction",t.data.page_views_change_direction,!1),setDataPointChangeClass("skystats-facebook-page-visits-change",t.data.page_views_change_direction,!1),jQuery("#skystats-facebook-people-engaged-total").html(t.data.people_engaged),jQuery("#skystats-facebook-people-engaged-change").html(t.data.people_engaged_change);var i=jQuery("#skystats-facebook-people-engaged-change-info");if(t.changeTooltipContent(i,t.data.previous_people_engaged+" "+i.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-facebook-people-engaged-change-direction",t.data.people_engaged_change_direction,!1),setDataPointChangeClass("skystats-facebook-people-engaged-change",t.data.people_engaged_change_direction,!1),"detail"===t.viewName){var s=jQuery("#skystats-facebook-top-posts-data-table-tbody"),n="",r=s.parent();null!=t.topPostsData&&t.topPostsData.length?(s.html(""),jQuery.each(t.topPostsData,function(t,a){n+="<tr>"+"<td>"+a.name+"</td>"+"<td>"+a.likes+"</td>"+"<td>"+a.reach+"</td>"+"<td>"+a.comments+"</td>"+"<td>"+a.date+"</td>"+"</tr>"}),r.show(),jQuery(n).appendTo(s)):(r.hide(),t.$topPostsDataErrorContainer.show()),jQuery("#skystats-facebook-top-posts-data-table-column-content").fadeIn()}t.enableGridIcon(),t.enableSettingsIcon(),t.loadingDataTabData=!1,t.viewingDataTab=!0})},Facebook.prototype.loadSettingsTabData=function(t){this.hideChartFigure(),this.$topDataErrorContainers.fadeOut(),this.$rangeErrorContainer.fadeOut();var a=this,e="mashboard"===this.viewName?this.$dataPointsContainer.add(this.$chartContainer):this.$dataPointsContainer.add(this.$chartContainer).add(this.$dataTableColumnsContent);e.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.get(ajaxurl,{action:"skystats_ajax_facebook_get_page_list",request_type:t},function(t){t=jQuery.parseJSON(t),a.displaySettingsTabData(t)})})})},Facebook.prototype.displaySettingsTabData=function(t){var a=this;a.$loadingContainer.fadeOut(400,function(){if("success"===t.responseType){var e="",o=jQuery("#skystats-facebook-page-list");jQuery.each(t.data,function(t,o){var i=a.selectedPageID===o.id?'selected="selected"':"";e+='<option value="'+o.id+'" '+i+">"+o.name+"</option>"}),o.html(e),a.$settingsTabPageSelectionSection.fadeIn(),o.chosen({max_selected_options:1,width:"100%"});var i=jQuery("#skystats-facebook-save-page-id");i.off("click"),i.one("click",function(t){t.preventDefault(),a.disableSettingsIcon();var e=o.val();a.selectedPageID=e,a.$settingsTabSections.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.post(ajaxurl,{action:"skystats_ajax_facebook_save_page_id",page_id:e},function(){a.data=null,"detail"===a.viewName&&(a.loadedAllData=!1),a.loadDataTabData()})})})}),a.$settingsTabDeauthorizeSection.fadeIn()}else switch(t.responseContext){case"authorization_required":a.$settingsTabAuthorizeSection.fadeIn();break;case"reauthorization_required":a.$settingsTabReauthorizeSection.fadeIn();break;case"no_pages":a.$settingsTabNoPagesSection.fadeIn(),a.$settingsTabDeauthorizeSection.fadeIn();break;default:a.$settingsTabDeauthorizeSection.fadeIn()}if(a.viewingSettingsTab=!0,a.loadingSettingsTabData=!1,null!=a.data&&a.enableSettingsIcon(),a.$settingsTabAuthorizeSection.is(":visible")||a.$settingsTabReauthorizeSection.is(":visible")){var s=jQuery("#skystats-facebook-authorize, #skystats-facebook-reauthorize");s.off("click"),s.on("click",function(t){t.preventDefault(),null!=a.authPopupWindowIntervalId&&clearInterval(a.authPopupWindowIntervalId),a.createPopupWindow(a.authPopupWindowURL,"FacebookAuthPopup",900,500,null),a.authPopupWindowIntervalId=setInterval(function(){try{(null==a.popupWindow||a.popupWindow.closed)&&clearInterval(a.authPopupWindowIntervalId),!a.popupWindow.location.hasOwnProperty("href")||a.authPopupWindowCompleteURL!==a.popupWindow.location.href&&a.authPopupWindowCompleteURL+"#"!==a.popupWindow.location.href&&a.authPopupWindowCompleteURL+"#_=_"!==a.popupWindow.location.href||(a.popupWindow.close(),clearInterval(a.authPopupWindowIntervalId),a.$settingsTabSections.fadeOut(400).promise().done(function(){a.loadSettingsTabData("fresh")}))}catch(t){}},100)})}if(a.$settingsTabDeauthorizeSection.is(":visible")){var n=jQuery("#skystats-facebook-deauthorize");n.off("click"),n.on("click",function(t){t.preventDefault(),a.disableSettingsIcon(),a.$settingsTabSections.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.post(ajaxurl,{action:"skystats_ajax_facebook_deauthorize"},function(){a.data=null,a.viewingSettingsTab=!1,a.loadingSettingsTabData=!0,a.loadSettingsTabData("fresh")})})})})}})},Facebook.prototype.enableGridIcon=function(){Integration.prototype.enableGridIcon.call(this)},Facebook.prototype.disableGridIcon=function(){Integration.prototype.disableGridIcon.call(this)},Facebook.prototype.enableSettingsIcon=function(){Integration.prototype.enableSettingsIcon.call(this)},Facebook.prototype.disableSettingsIcon=function(){Integration.prototype.disableSettingsIcon.call(this)},Facebook.prototype.updateDataTabData=function(t){Integration.prototype.updateDataTabData.call(this,t)},Facebook.prototype.resizeChart=function(){null!=this.data&&(setGlobalPossibleMarkers(null),this.chartInstance.shutdown(),this.chartData[0].data=getChartData(this.data.chart_data.likes,this.$chart,this,"daily"),this.chartData[1].data=getChartData(this.data.chart_data.reach,this.$chart,this,"daily"),this.chartInstance=this.$chart.plot(this.chartData,this.chartOptions).data("plot"))},Twitter.prototype=createObject(Integration.prototype),Twitter.prototype.constructor=Twitter,Twitter.prototype.loadDataTabData=function(){this.hideChartFigure(),this.historicalDataErrorContainer.fadeOut(),this.$topDataErrorContainers.fadeOut(),this.viewingSettingsTab=!1,this.loadingDataTabData=!0;var t=this;this.$settingsTabSections.add(this.$chartContainer).add(this.$dataPointsContainer).add(this.$dataTableColumnsContent).fadeOut(400).promise().done(function(){t.$loadingContainer.fadeIn(400,function(){if("mashboard"===t.viewName){if(null!=t.data)return void t.displayDataTabData();jQuery.get(ajaxurl,{action:"skystats_ajax_twitter_api_query",query:"get_mashboard_view_data",start_date:t.startDate,end_date:t.endDate},function(a){a=jQuery.parseJSON(a),null!=a.data?(t.data=a.data,t.displayDataTabData()):t.loadSettingsTabData("fresh")})}else"detail"===t.viewName&&(!0===t.loadedAllData?t.displayDataTabData():jQuery.get(ajaxurl,{action:"skystats_ajax_twitter_api_query",query:"get_detail_view_data",start_date:t.startDate,end_date:t.endDate},function(a){a=jQuery.parseJSON(a),null!=a.data?(t.data=a.data,t.displayDataTabData()):t.loadSettingsTabData("fresh")}))})})},Twitter.prototype.displayDataTabData=function(){var t=this;this.historicalDataErrorContainer.fadeOut(),this.$topDataErrorContainers.fadeOut(),this.$loadingContainer.fadeOut(400,function(){if("string"==typeof t.data.period.oldest_tweet_date){var a=new Date(t.startDate),e=new Date(t.endDate),o=new Date(t.data.period.oldest_tweet_date),i=o.getTime();if(a.getTime()<=i||e.getTime()<=i){var s=t.translations.twitter_historical_data_error;s=s.replace("{DATE}",t.data.period.oldest_tweet_date);var n=t.historicalDataError.find("a");n.attr("data-tooltip",s),n.tooltip({content:n.attr("data-tooltip"),items:"[data-tooltip]"}),t.historicalDataErrorContainer.fadeIn()}}t.showChartFigure(),t.$dataTabContent.fadeIn(),t.$chartContainer.show(),null!==t.chartInstance&&t.chartInstance.shutdown(),t.chartData[0].data=getChartData(t.data.chart_data.favourites,t.$chart,t,t.frequency),t.chartData[1].data=getChartData(t.data.chart_data.mentions,t.$chart,t,t.frequency),t.chartInstance=t.$chart.plot(t.chartData,t.chartOptions).data("plot"),t.$dataPointsContainer.show(),jQuery("#skystats-twitter-tweets").html(t.data.period.tweets),jQuery("#skystats-twitter-tweets-change").html(t.data.period.tweets_change);var r=jQuery("#skystats-twitter-tweets-change-info");t.changeTooltipContent(r,t.data.period.previous_tweets+" "+r.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-twitter-tweets-change-direction",t.data.period.tweets_change_direction,!1),setDataPointChangeClass("skystats-twitter-tweets-change",t.data.period.tweets_change_direction,!1),jQuery("#skystats-twitter-following").html(t.data.period.following),jQuery("#skystats-twitter-following-change").html(t.data.period.following_change);var c=jQuery("#skystats-twitter-following-change-info");t.changeTooltipContent(c,t.data.period.previous_following+" "+c.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-twitter-following-change-direction",t.data.period.following_change_direction,!1),setDataPointChangeClass("skystats-twitter-following-change",t.data.period.following_change_direction,!1),jQuery("#skystats-twitter-followers").html(t.data.period.followers),jQuery("#skystats-twitter-followers-change").html(t.data.period.followers_change);var d=jQuery("#skystats-twitter-followers-change-info");t.changeTooltipContent(d,t.data.period.previous_followers+" "+d.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-twitter-followers-change-direction",t.data.period.followers_change_direction,!1),setDataPointChangeClass("skystats-twitter-followers-change",t.data.period.followers_change_direction,!1),jQuery("#skystats-twitter-retweets").html(t.data.period.retweets),jQuery("#skystats-twitter-retweets-change").html(t.data.period.retweets_change);var l=jQuery("#skystats-twitter-retweets-change-info");t.changeTooltipContent(l,t.data.period.previous_retweets+" "+l.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-twitter-retweets-change-direction",t.data.period.retweets_change_direction,!1),setDataPointChangeClass("skystats-twitter-retweets-change",t.data.period.retweets_change_direction,!1),jQuery("#skystats-twitter-favourites").html(t.data.period.favourites),jQuery("#skystats-twitter-favourites-change").html(t.data.period.favourites_change);var h=jQuery("#skystats-twitter-favourites-change-info");t.changeTooltipContent(h,t.data.period.previous_favourites+" "+h.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-twitter-favourites-change-direction",t.data.period.favourites_change_direction,!1),setDataPointChangeClass("skystats-twitter-favourites-change",t.data.period.favourites_change_direction,!1),jQuery("#skystats-twitter-mentions").html(t.data.period.mentions),jQuery("#skystats-twitter-mentions-change").html(t.data.period.mentions_change);var g=jQuery("#skystats-twitter-mentions-change-info");if(t.changeTooltipContent(g,t.data.period.previous_mentions+" "+g.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-twitter-mentions-change-direction",t.data.period.mentions_change_direction,!1),setDataPointChangeClass("skystats-twitter-mentions-change",t.data.period.mentions_change_direction,!1),"detail"===t.viewName){var u=jQuery("#skystats-twitter-current-tweets");u.html(t.data.current.tweets);var p=jQuery("#skystats-twitter-current-retweets");p.html(t.data.current.retweets);var y=jQuery("#skystats-twitter-current-following");y.html(t.data.current.following);var _=jQuery("#skystats-twitter-current-followers");_.html(t.data.current.followers);var f=jQuery("#skystats-twitter-current-mentions");f.html(t.data.current.mentions),function(){var a=jQuery("#skystats-twitter-top-latest-tweets"),e=a.parent(),o=a.find("tbody"),i=t.data.period.top_tweets,s="";i.length?(o.html(""),jQuery.each(i,function(t,a){s+="<tr>"+"<td><p>"+a.text+"</p><p>"+parseTopTableDate(a.date)+"</p></td>"+"<td>"+a.retweets+"</td>"+"<td>"+a.favourites+"</td>"+"</tr>"}),jQuery(s).appendTo(o),a.show()):(a.hide(),t.$topTweetsDataErrorContainer.show()),e.show()}(),function(){var a=jQuery("#skystats-twitter-top-latest-retweets"),e=a.parent(),o=a.find("tbody"),i=t.data.period.top_retweets,s="";i.length?(o.html(""),jQuery.each(i,function(t,a){s+="<tr>"+"<td><p>"+a.text+"</p><p>"+parseTopTableDate(a.date)+"</p></td>"+"<td>"+a.retweets+"</td>"+"</tr>"}),jQuery(s).appendTo(o),a.show()):(a.hide(),t.$topRetweetsDataErrorContainer.show()),e.show()}(),function(){var a=jQuery("#skystats-twitter-top-latest-mentions"),e=a.parent(),o=a.find("tbody"),i=t.data.period.top_mentions,s="";i.length?(o.html(""),jQuery.each(i,function(t,a){s+="<tr>"+"<td>"+a.user_screen_name+"</td>"+"<td><p>"+a.text+"</p><p>"+parseTopTableDate(a.date)+"</p></td>"+"<td>"+a.retweets+"</td>"+"<td>"+a.favourites+"</td>"+"</tr>"}),jQuery(s).appendTo(o),a.show()):(a.hide(),t.$topMentionsDataErrorContainer.show()),e.show()}(),function(){var a=jQuery("#skystats-twitter-top-latest-favourites"),e=a.parent(),o=a.find("tbody"),i=t.data.period.top_favourites,s="";i.length?(o.html(""),jQuery.each(i,function(t,a){s+="<tr>"+"<td><p>"+a.text+"</p><p>"+parseTopTableDate(a.date)+"</p></td>"+"<td>"+a.favourites+"</td>"+"</tr>"}),jQuery(s).appendTo(o),a.show()):(a.hide(),t.$topFavouritesDataErrorContainer.show()),e.show()}()}t.enableGridIcon(),t.enableSettingsIcon(),t.loadingDataTabData=!1,t.viewingDataTab=!0})},Twitter.prototype.loadSettingsTabData=function(t){this.hideChartFigure();var a=this,e="mashboard"===this.viewName?this.$dataPointsContainer.add(this.$chartContainer).add(this.historicalDataErrorContainer).add(this.$topDataErrorContainers):this.$dataPointsContainer.add(this.$chartContainer).add(this.$dataTableColumnsContent).add(this.historicalDataErrorContainer).add(this.$topDataErrorContainers);e.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.get(ajaxurl,{action:"skystats_ajax_twitter_api_query",query:"get_status",request_type:t},function(t){t=jQuery.parseJSON(t),a.displaySettingsTabData(t)})})})},Twitter.prototype.displaySettingsTabData=function(t){var a=this;a.$loadingContainer.fadeOut(400,function(){if("success"===t.responseType)switch(t.responseContext){case"valid_access_token":a.$settingsTabValidAccessTokenSection.fadeIn(),a.$settingsTabDeauthorizeSection.fadeIn()}else switch(t.responseContext){case"authorization_required":a.$settingsTabAuthorizeSection.fadeIn();break;case"invalid_access_token":a.$settingsTabInvalidAcccessTokenSection.fadeIn(),a.$settingsTabDeauthorizeSection.fadeIn();break;case"rate_limit_reached":a.$settingsTabRateLimitReachedSection.fadeIn(),a.$settingsTabDeauthorizeSection.fadeIn();break;default:a.$settingsTabDeauthorizeSection.fadeIn()}if(a.viewingSettingsTab=!0,a.loadingSettingsTabData=!1,null!=a.data&&a.enableSettingsIcon(),a.$settingsTabAuthorizeSection.is(":visible")){var e=jQuery("#skystats-twitter-authorize");e.off("click"),e.on("click",function(t){t.preventDefault(),null!=a.authPopupWindowIntervalId&&clearInterval(a.authPopupWindowIntervalId),a.createPopupWindow(a.authPopupWindowURL,"TwitterAuthPopup",900,500,null),a.authPopupWindowIntervalId=setInterval(function(){try{(null==a.popupWindow||a.popupWindow.closed)&&clearInterval(a.authPopupWindowIntervalId),!a.popupWindow.location.hasOwnProperty("href")||a.authPopupWindowCompleteURL!==a.popupWindow.location.href&&a.authPopupWindowCompleteURL+"#"!==a.popupWindow.location.href||(a.popupWindow.close(),clearInterval(a.authPopupWindowIntervalId),a.$settingsTabSections.fadeOut(400).promise().done(function(){a.loadDataTabData()}))}catch(t){}},100)})}if(a.$settingsTabDeauthorizeSection.is(":visible")){var o=jQuery("#skystats-twitter-deauthorize");o.off("click"),o.on("click",function(t){t.preventDefault(),a.disableSettingsIcon(),a.$settingsTabSections.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.get(ajaxurl,{action:"skystats_ajax_twitter_api_query",query:"deauthorize"},function(){a.data=null,a.viewingSettingsTab=!1,a.loadingSettingsTabData=!0,a.loadSettingsTabData("fresh")})})})})}})},Twitter.prototype.resizeChart=function(){null!=this.data&&(setGlobalPossibleMarkers(null),this.chartInstance.shutdown(),this.chartData[0].data=getChartData(this.data.chart_data.favourites,this.$chart,this,"daily"),this.chartData[1].data=getChartData(this.data.chart_data.mentions,this.$chart,this,"daily"),this.chartInstance=this.$chart.plot(this.chartData,this.chartOptions).data("plot"))},GoogleAdwords.prototype=createObject(Integration.prototype),GoogleAdwords.prototype.constructor=GoogleAdwords,GoogleAdwords.prototype.loadDataTabData=function(){this.hideChartFigure(),this.$integrationErrorContainer.fadeOut(),this.viewingSettingsTab=!1,this.loadingDataTabData=!0;var t=this;this.$settingsTabSections.add(this.$chartContainer).add(this.$dataPointsContainer).add(this.$dataTableColumnsContent).fadeOut(400).promise().done(function(){t.$loadingContainer.fadeIn(400,function(){if("mashboard"===t.viewName){if(null!=t.data)return void t.displayDataTabData();jQuery.get(ajaxurl,{action:"skystats_ajax_google_adwords_api_query",query:"get_mashboard_view_data",start_date:t.startDate,end_date:t.endDate,customer_id:t.selectedCustomerId,campaign_id:t.selectedCampaignId},function(a){a=jQuery.parseJSON(a),null!=a.data?(t.data=a.data,t.displayDataTabData()):t.loadSettingsTabData("fresh")})}else"detail"===t.viewName&&(!0===t.loadedAllData?t.displayDataTabData():jQuery.get(ajaxurl,{action:"skystats_ajax_google_adwords_api_query",query:"get_detail_view_data",start_date:t.startDate,end_date:t.endDate,customer_id:t.selectedCustomerId,campaign_id:t.selectedCampaignId},function(a){a=jQuery.parseJSON(a),null!=a.data?(t.data=a.data,t.displayDataTabData()):t.loadSettingsTabData("fresh")}))})})},GoogleAdwords.prototype.enableGridIcon=function(){Integration.prototype.enableGridIcon.call(this)},GoogleAdwords.prototype.disableGridIcon=function(){Integration.prototype.disableGridIcon.call(this)},GoogleAdwords.prototype.enableSettingsIcon=function(){Integration.prototype.enableSettingsIcon.call(this)},GoogleAdwords.prototype.disableSettingsIcon=function(){Integration.prototype.disableSettingsIcon.call(this)},GoogleAdwords.prototype.displayDataTabData=function(){var t=this;this.$integrationErrorContainer.fadeOut(),this.$loadingContainer.fadeOut(400,function(){t.showChartFigure(),t.$dataTabContent.fadeIn(),t.$chartContainer.show();var a=t.data.currency_symbol_hex_code;t.currencySymbol=a,null!==t.chartInstance&&t.chartInstance.shutdown(),t.chartData[0].data=getChartData(t.data.chart_data.clicks,t.$chart,t,t.frequency),t.chartData[1].data=getChartData(t.data.chart_data.avg_cost_per_click,t.$chart,t,t.frequency),t.chartData[1].yaxis=2,t.chartOptions.yaxes[1].tickFormatter=function(t){return a+parseFloat(t).toFixed(1)},t.chartOptions.tooltipOpts.content=function(a,e,o,i){return"GoogleAdwords"===t.integrationName&&"Avg. CPC"===a&&1===i.seriesIndex?"<strong>"+t.currencySymbol.toString()+o.toString()+"</strong><br>"+e:"<strong>"+o.toString()+"</strong><br>"+e},t.chartInstance=t.$chart.plot(t.chartData,t.chartOptions).data("plot"),t.$dataPointsContainer.show(),jQuery("#skystats-google-adwords-cost").html(t.data.period.cost),jQuery("#skystats-google-adwords-cost-currency").html(a),jQuery("#skystats-google-adwords-cost-change").html(t.data.period.cost_change);var e=jQuery("#skystats-google-adwords-cost-change-info");t.changeTooltipContent(e,a+t.data.period.previous_cost+" "+e.attr("data-tooltip-backup")),
	setDataPointChangeDirectionClass("skystats-google-adwords-cost-change-direction",t.data.period.cost_change_direction,!0),setDataPointChangeClass("skystats-google-adwords-cost-change",t.data.period.cost_change_direction,!0),jQuery("#skystats-google-adwords-clicks").html(t.data.period.clicks),jQuery("#skystats-google-adwords-clicks-change").html(t.data.period.clicks_change);var o=jQuery("#skystats-google-adwords-clicks-change-info");t.changeTooltipContent(o,t.data.period.previous_clicks+" "+o.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-adwords-clicks-change-direction",t.data.period.clicks_change_direction,!1),setDataPointChangeClass("skystats-google-adwords-clicks-change",t.data.period.clicks_change_direction,!1),jQuery("#skystats-google-adwords-avg-cost-per-click").html(t.data.period.avg_cost_per_click),jQuery("#skystats-google-adwords-avg-cost-per-click-currency").html(a),jQuery("#skystats-google-adwords-avg-cost-per-click-change").html(t.data.period.avg_cost_per_click_change);var i=jQuery("#skystats-google-adwords-avg-cost-per-click-change-info");t.changeTooltipContent(i,a+t.data.period.previous_avg_cost_per_click+" "+i.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-adwords-avg-cost-per-click-change-direction",t.data.period.avg_cost_per_click_change_direction,!0),setDataPointChangeClass("skystats-google-adwords-avg-cost-per-click-change",t.data.period.avg_cost_per_click_change_direction,!0),jQuery("#skystats-google-adwords-conversions").html(t.data.period.conversions),jQuery("#skystats-google-adwords-conversions-change").html(t.data.period.conversions_change);var s=jQuery("#skystats-google-adwords-conversions-change-info");if(t.changeTooltipContent(s,t.data.period.previous_conversions+" "+s.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-adwords-conversions-change-direction",t.data.period.conversions_change_direction,!1),setDataPointChangeClass("skystats-google-adwords-conversions-change",t.data.period.conversions_change_direction,!1),"detail"===t.viewName){jQuery("#skystats-google-adwords-impressions").html(t.data.period.impressions),jQuery("#skystats-google-adwords-impressions-change").html(t.data.period.impressions_change);var n=jQuery("#skystats-google-adwords-impressions-change-info");t.changeTooltipContent(n,t.data.period.previous_impressions+" "+n.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-adwords-impressions-change-direction",t.data.period.impressions_change_direction,!1),setDataPointChangeClass("skystats-google-adwords-impressions-change",t.data.period.impressions_change_direction,!1),jQuery("#skystats-google-adwords-click-through-rate").html(t.data.period.click_through_rate),jQuery("#skystats-google-adwords-click-through-rate-change").html(t.data.period.click_through_rate_change);var r=jQuery("#skystats-google-adwords-click-through-rate-change-info");t.changeTooltipContent(r,t.data.period.previous_click_through_rate+"% "+r.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-adwords-click-through-rate-change-direction",t.data.period.click_through_rate_change_direction,!1),setDataPointChangeClass("skystats-google-adwords-click-through-rate-change",t.data.period.click_through_rate_change_direction,!1),jQuery("#skystats-google-adwords-avg-cost-per-conversion").html(t.data.period.avg_cost_per_conversion),jQuery("#skystats-google-adwords-avg-cost-per-conversion-currency").html(a),jQuery("#skystats-google-adwords-avg-cost-per-conversion-change").html(t.data.period.avg_cost_per_conversion_change);var c=jQuery("#skystats-google-adwords-avg-cost-per-conversion-change-info");t.changeTooltipContent(c,a+t.data.period.previous_average_cost_per_conversion+" "+c.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-adwords-avg-cost-per-conversion-change-direction",t.data.period.avg_cost_per_conversion_change_direction,!0),setDataPointChangeClass("skystats-google-adwords-avg-cost-per-conversion-change",t.data.period.avg_cost_per_conversion_change_direction,!0),jQuery("#skystats-google-adwords-bounce-rate").html(t.data.period.bounce_rate),jQuery("#skystats-google-adwords-bounce-rate-change").html(t.data.period.bounce_rate_change);var d=jQuery("#skystats-google-adwords-bounce-rate-change-info");t.changeTooltipContent(d,t.data.period.previous_bounce_rate+"% "+d.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-google-adwords-bounce-rate-change-direction",t.data.period.bounce_rate_change_direction,!0),setDataPointChangeClass("skystats-google-adwords-bounce-rate-change",t.data.period.bounce_rate_change_direction,!0),function(){if(null!=t.data.period.account_level_campaigns){var e=jQuery("#skystats-google-adwords-account-level-campaigns-table"),o=e.parent(),i=o.parent(),s=e.find("tbody"),n=t.data.period.account_level_campaigns,r="";Object.keys(n).length?(s.html(""),jQuery.each(n,function(t,e){r+="<tr>"+"<td>"+t+"</td>"+"<td>"+e.clicks+"</td>"+"<td>"+e.impressions+"</td>"+"<td>"+e.click_through_rate+"%</td>"+"<td>"+a+e.average_cost_per_click+"</td>"+"<td>"+a+e.cost+"</td>"+"<td>"+e.conversions+"</td>"+"</tr>"}),jQuery(r).appendTo(s),e.show()):(e.hide(),t.$accountLevelCampaignsTableErrorContainer.show()),o.show(),i.show()}}(),function(){if(null!=t.data.period.account_level_top_keyword_performance){var e=jQuery("#skystats-google-adwords-account-level-top-keyword-performance-table"),o=e.parent(),i=o.parent(),s=e.find("tbody"),n=t.data.period.account_level_top_keyword_performance,r="";n.length?(s.html(""),jQuery.each(n,function(t,e){r+="<tr>"+"<td>"+e.keyword+"</td>"+"<td>"+e.campaign_name+"</td>"+"<td>"+e.clicks+"</td>"+"<td>"+e.impressions+"</td>"+"<td>"+e.click_through_rate+"%</td>"+"<td>"+a+e.average_cost_per_click+"</td>"+"<td>"+a+e.cost+"</td>"+"<td>"+e.conversions+"</td>"+"</tr>"}),jQuery(r).appendTo(s),e.show()):(e.hide(),t.$accountLevelTopKeywordPerformanceTableErrorContainer.show()),o.show(),i.show()}}(),function(){if(null!=t.data.period.campaign_level_ad_groups){var e=jQuery("#skystats-google-adwords-campaign-level-ad-groups-table"),o=e.parent(),i=o.parent(),s=e.find("tbody"),n=t.data.period.campaign_level_ad_groups,r="";Object.keys(n).length?(s.html(""),jQuery.each(n,function(t,e){r+="<tr>"+"<td>"+e.ad_group_name+"</td>"+"<td>"+e.clicks+"</td>"+"<td>"+e.impressions+"</td>"+"<td>"+e.click_through_rate+"%</td>"+"<td>"+a+e.average_cost_per_click+"</td>"+"<td>"+a+e.cost+"</td>"+"<td>"+e.conversions+"</td>"+"</tr>"}),jQuery(r).appendTo(s),e.show()):(e.hide(),t.$campaignLevelAdGroupsTableErrorContainer.show()),o.show(),i.show()}}(),function(){if(null!=t.data.period.campaign_level_top_keyword_performance){var e=jQuery("#skystats-google-adwords-campaign-level-top-keyword-performance-table"),o=e.parent(),i=o.parent(),s=e.find("tbody"),n=t.data.period.campaign_level_top_keyword_performance,r="";Object.keys(n).length?(s.html(""),jQuery.each(n,function(t,e){r+="<tr>"+"<td>"+e.keyword+"</td>"+"<td>"+e.ad_group_name+"</td>"+"<td>"+e.clicks+"</td>"+"<td>"+e.impressions+"</td>"+"<td>"+e.click_through_rate+"%</td>"+"<td>"+a+e.average_cost_per_click+"</td>"+"<td>"+a+e.cost+"</td>"+"<td>"+e.conversions+"</td>"+"</tr>"}),jQuery(r).appendTo(s),e.show()):(e.hide(),t.$campaignLevelTopKeywordPerformanceTableErrorContainer.show()),o.show(),i.show()}}()}t.enableGridIcon(),t.enableSettingsIcon(),t.loadingDataTabData=!1,t.viewingDataTab=!0})},GoogleAdwords.prototype.loadSettingsTabData=function(){"detail"===this.viewName&&this.$dataTableColumns.fadeOut(),this.$integrationErrorContainer.fadeOut(),this.hideChartFigure();var t=this,a="mashboard"===this.viewName?this.$dataPointsContainer.add(this.$chartContainer):this.$dataPointsContainer.add(this.$chartContainer).add(this.$dataTableColumnsContent);a.fadeOut(400).promise().done(function(){t.$loadingContainer.fadeIn(400,function(){var a=t.getAccountsDeferredObject();null!=t.selectedCustomerId?jQuery.when(a,t.getCampaignsDeferredObject(t.selectedCustomerId)).done(function(a,e){var o=jQuery.parseJSON(a[0]),i=jQuery.parseJSON(e[0]);t.displaySettingsTabData(o,i)}):jQuery.when(a).done(function(a){var e=jQuery.parseJSON(a[0]);t.displaySettingsTabData(e,{})})})})},GoogleAdwords.prototype.getAccountsDeferredObject=function(){return jQuery.get(ajaxurl,{action:"skystats_ajax_google_adwords_api_query",query:"get_accounts"})},GoogleAdwords.prototype.getCampaignsDeferredObject=function(t){return jQuery.get(ajaxurl,{action:"skystats_ajax_google_adwords_api_query",query:"get_campaigns",customer_id:t})},GoogleAdwords.prototype.displaySettingsTabData=function(t,a){var e=this;this.$integrationErrorContainer.fadeOut(),e.$loadingContainer.fadeOut(400,function(){if("error"===t.responseType){var o=t.responseContext;"authorization_required"===o?e.$settingsTabAuthorizeSection.fadeIn():(e.translations.google_adwords_api_errors.hasOwnProperty(o)&&(e.$integrationErrorContainer.find(">p").html(e.translations.google_adwords_api_errors[o]),e.$integrationErrorContainer.fadeIn()),e.$settingsTabDeauthorizeSection.fadeIn())}else{if("success"===t.responseType){var i="",s=jQuery("#skystats-google-adwords-account-selection"),n=[];jQuery.isArray(t.data)?(jQuery.each(t.data,function(t,a){n.push(a)}),n.sort(function(t,a){var e=t.name.toLowerCase(),o=a.name.toLowerCase();return o>e?-1:e>o?1:0})):n=[{id:t.data.id,name:t.data.name}];var r=n.length;i+='<option value="select">Select Account</option>';for(var c=0;r>c;++c){var d=e.selectedCustomerId==n[c].id?'selected="selected"':"",l=n[c].id.toString(),h=l.slice(0,3)+"-"+l.slice(3,6)+"-"+l.slice(6);i+='<option value="'+l+'" '+d+">"+n[c].name+" ("+h+")</option>"}s.html(i),e.$settingsTabAccountSelectionSection.fadeIn(),s.chosen({max_selected_options:1,width:"100%"}),s.off("change"),s.on("change",function(){var a=jQuery(this).val();"select"!=a&&a!=e.selectedCustomerId&&e.$settingsTabCampaignSelectionSection.fadeOut(400,function(){e.$campaignSectionLoadingIcon.fadeIn(400,function(){e.selectedCustomerId=a,jQuery.get(ajaxurl,{action:"skystats_ajax_google_adwords_api_query",query:"save_customer_id",google_adwords_selected_customer_id:a},function(){jQuery.when(e.getCampaignsDeferredObject(a)).done(function(a){var o=jQuery.parseJSON(a);e.displaySettingsTabData(t,o)})})})})})}if(a.hasOwnProperty("responseType")&&"error"===a.responseType){e.$campaignSectionLoadingIcon.fadeOut(),e.$settingsTabCampaignSelectionSection.fadeOut();var o=a.responseContext;e.translations.google_adwords_api_errors.hasOwnProperty(o)&&(e.$integrationErrorContainer.find(">p").html(e.translations.google_adwords_api_errors[o]),e.$integrationErrorContainer.fadeIn())}else if(a.hasOwnProperty("responseType")&&"success"===a.responseType){e.$campaignSectionLoadingIcon.fadeOut();var g=jQuery("#skystats-google-adwords-campaign-selection"),u=jQuery("#skystats-google-adwords-save-campaign"),p="",y=[];jQuery.isArray(a.data)?(jQuery.each(a.data,function(t,a){y.push(a)}),y.sort(function(t,a){var e=t.name.toLowerCase(),o=a.name.toLowerCase();return o>e?-1:e>o?1:0})):y=[{id:a.data.id,name:a.data.name}];for(var _=y.length,f=0;_>f;++f){var b=e.selectedCampaignId==y[f].id?'selected="selected"':"";p+='<option value="'+y[f].id+'" '+b+">"+y[f].name+"</option>"}g.html(p),e.$campaignSectionLoadingIcon.fadeOut(400,function(){u.show(),e.$campaignSectionDescription.show(),u.off("click"),u.one("click",function(t){t.preventDefault(),e.$integrationErrorContainer.fadeOut(),e.disableSettingsIcon();var a=g.val();e.selectedCampaignId=a;var o=s.val();if(o==e.selectedCustomerId)e.$settingsTabSections.fadeOut(400).promise().done(function(){e.$loadingContainer.fadeIn(400,function(){jQuery.get(ajaxurl,{action:"skystats_ajax_google_adwords_api_query",query:"save_campaign_id",google_adwords_selected_campaign_id:a},function(){e.data=null,"detail"===e.viewName&&(e.loadedAllData=!1),e.loadDataTabData()})})});else{e.selectedCustomerId=o;var i=g.add(u).add(e.$campaignSectionDescription);i.fadeOut(400).promise().done(function(){e.$campaignSectionLoadingIcon.fadeIn(400,function(){jQuery.get(ajaxurl,{action:"skystats_ajax_google_adwords_api_query",query:"save_campaign_id",google_adwords_selected_campaign_id:a,google_adwords_selected_customer_id:o},function(){jQuery.when(e.getAccountsDeferredObject(),e.getCampaignsDeferredObject(e.selectedCustomerId)).done(function(t,a){var o=jQuery.parseJSON(t[0]),i=jQuery.parseJSON(a[0]);e.displaySettingsTabData(o,i)})})})})}}),e.$settingsTabCampaignSelectionSection.fadeIn(),g.chosen({max_selected_options:1,width:"100%"}),g.trigger("chosen:updated")})}e.$settingsTabDeauthorizeSection.fadeIn()}if(e.viewingSettingsTab=!0,e.loadingSettingsTabData=!1,null!=e.data&&e.enableSettingsIcon(),e.$settingsTabAuthorizeSection.is(":visible")){var k=jQuery("#skystats-google-adwords-authorize");k.off("click"),k.on("click",function(t){t.preventDefault(),null!=e.authPopupWindowIntervalId&&clearInterval(e.authPopupWindowIntervalId),e.createPopupWindow(e.authPopupWindowURL,"GoogleAdwordsAuthPopup",900,500,null),e.authPopupWindowIntervalId=setInterval(function(){try{(null==e.popupWindow||e.popupWindow.closed)&&clearInterval(e.authPopupWindowIntervalId),!e.popupWindow.location.hasOwnProperty("href")||e.authPopupWindowCompleteURL!==e.popupWindow.location.href&&e.authPopupWindowCompleteURL+"#"!==e.popupWindow.location.href||(e.popupWindow.close(),clearInterval(e.authPopupWindowIntervalId),e.$settingsTabSections.fadeOut(400).promise().done(function(){e.loadSettingsTabData("fresh")}))}catch(t){}},100)})}if(e.$settingsTabDeauthorizeSection.is(":visible")){var m=jQuery("#skystats-google-adwords-deauthorize");m.off("click"),m.on("click",function(t){t.preventDefault(),e.$integrationErrorContainer.fadeOut(),e.disableSettingsIcon(),e.$settingsTabSections.fadeOut(400).promise().done(function(){e.$loadingContainer.fadeIn(400,function(){jQuery.get(ajaxurl,{action:"skystats_ajax_google_adwords_api_query",query:"deauthorize"},function(){e.data=null,e.viewingSettingsTab=!1,e.loadingSettingsTabData=!0,e.loadSettingsTabData("fresh")})})})})}})},GoogleAdwords.prototype.resizeChart=function(){null!=this.data&&(this.chartInstance.shutdown(),this.chartData[0].data=getChartData(this.data.chart_data.clicks,this.$chart,this,"daily"),this.chartData[1].data=getChartData(this.data.chart_data.avg_cost_per_click,this.$chart,this,"daily"),this.chartData[1].yaxis=2,this.chartInstance=this.$chart.plot(this.chartData,this.chartOptions).data("plot"))},MailChimp.prototype=createObject(Integration.prototype),MailChimp.prototype.constructor=MailChimp,MailChimp.prototype.loadDataTabData=function(){this.hideChartFigure(),this.$integrationErrorContainer.fadeOut(),this.viewingSettingsTab=!1,this.loadingDataTabData=!0;var t=this;this.$settingsTabSections.add(this.$chartContainer).add(this.$dataPointsContainer).add(this.$dataTableColumnsContent).fadeOut(400).promise().done(function(){t.$loadingContainer.fadeIn(400,function(){if("mashboard"===t.viewName){if(null!=t.data)return void t.displayDataTabData();jQuery.get(ajaxurl,{action:"skystats_ajax_mailchimp_api_query",query:"get_mashboard_view_data",start_date:t.startDate,end_date:t.endDate},function(a){a=jQuery.parseJSON(a),null!=a.data?(t.data=a.data,t.displayDataTabData()):t.loadSettingsTabData("fresh")})}else"detail"===t.viewName&&(!0===t.loadedAllData?t.displayDataTabData():jQuery.get(ajaxurl,{action:"skystats_ajax_mailchimp_api_query",query:"get_detail_view_data",start_date:t.startDate,end_date:t.endDate},function(a){a=jQuery.parseJSON(a),null!=a.data?(t.data=a.data,t.displayDataTabData()):t.loadSettingsTabData("fresh")}))})})},MailChimp.prototype.displayDataTabData=function(){var t=this;this.$integrationErrorContainer.fadeOut(),this.$loadingContainer.fadeOut(400,function(){t.showChartFigure(),t.$dataTabContent.fadeIn(),t.$chartContainer.show(),null!==t.chartInstance&&t.chartInstance.shutdown(),t.chartData[0].data=getChartData(t.data.chart_data.unique_opens,t.$chart,t,t.frequency),t.chartData[1].data=getChartData(t.data.chart_data.unique_clicks,t.$chart,t,t.frequency),t.chartOptions.tooltipOpts.content=function(a,e,o){var i=o.toString();if("MailChimp"===t.integrationName&&i>0){var s="<strong>"+i+"</strong><br>"+e;return jQuery.each(t.data.period.date_campaigns,function(t,a){t=getMonthDayFormatted(t);var o=0;t===e&&jQuery.each(a,function(t,a){o>=3?s+="...":(s+="<br>"+a+" ("+t+")",o++)})}),s}return"<strong>"+i+"</strong><br>"+e},t.chartInstance=t.$chart.plot(t.chartData,t.chartOptions).data("plot"),t.$dataPointsContainer.show(),jQuery("#skystats-mailchimp-unique-opens").html(t.data.period.unique_opens),jQuery("#skystats-mailchimp-unique-opens-change").html(t.data.period.unique_opens_change);var a=jQuery("#skystats-mailchimp-unique-opens-change-info");t.changeTooltipContent(a,t.data.period.previous_unique_opens+" "+a.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-mailchimp-unique-opens-change-direction",t.data.period.unique_opens_change_direction,!1),setDataPointChangeClass("skystats-mailchimp-unique-opens-change",t.data.period.unique_opens_change_direction,!1),jQuery("#skystats-mailchimp-unique-clicks").html(t.data.period.unique_clicks),jQuery("#skystats-mailchimp-unique-clicks-change").html(t.data.period.unique_clicks_change);var e=jQuery("#skystats-mailchimp-unique-clicks-change-info");t.changeTooltipContent(e,t.data.period.previous_unique_clicks+" "+e.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-mailchimp-unique-clicks-change-direction",t.data.period.unique_clicks_change_direction,!1),setDataPointChangeClass("skystats-mailchimp-unique-clicks-change",t.data.period.unique_clicks_change_direction,!1),jQuery("#skystats-mailchimp-unsubscribed").html(t.data.period.unsubscribed),jQuery("#skystats-mailchimp-unsubscribed-change").html(t.data.period.unsubscribed_change);var o=jQuery("#skystats-mailchimp-unsubscribed-change-info");t.changeTooltipContent(o,t.data.period.previous_unsubscribed+" "+o.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-mailchimp-unsubscribed-change-direction",t.data.period.unsubscribed_change_direction,!0),setDataPointChangeClass("skystats-mailchimp-unsubscribed-change",t.data.period.unsubscribed_change_direction,!0),jQuery("#skystats-mailchimp-subscribers").html(t.data.period.subscribers),jQuery("#skystats-mailchimp-subscribers-change").html(t.data.period.subscribers_change);var i=jQuery("#skystats-mailchimp-subscribers-change-info");t.changeTooltipContent(i,t.data.period.previous_subscribers+" "+i.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-mailchimp-subscribers-change-direction",t.data.period.subscribers_change_direction,!1),setDataPointChangeClass("skystats-mailchimp-subscribers-change",t.data.period.subscribers_change_direction,!1),jQuery("#skystats-mailchimp-open-rate").html(t.data.period.open_rate),jQuery("#skystats-mailchimp-open-rate-change").html(t.data.period.open_rate_change);var s=jQuery("#skystats-mailchimp-open-rate-change-info");t.changeTooltipContent(s,t.data.period.previous_open_rate+"% "+s.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-mailchimp-open-rate-change-direction",t.data.period.open_rate_change_direction,!1),setDataPointChangeClass("skystats-mailchimp-open-rate-change",t.data.period.open_rate_change_direction,!1),jQuery("#skystats-mailchimp-click-rate").html(t.data.period.click_rate),jQuery("#skystats-mailchimp-click-rate-change").html(t.data.period.click_rate_change);var n=jQuery("#skystats-mailchimp-click-rate-change-info");if(t.changeTooltipContent(n,t.data.period.previous_click_rate+"% "+n.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-mailchimp-click-rate-change-direction",t.data.period.click_rate_change_direction,!1),setDataPointChangeClass("skystats-mailchimp-click-rate-change",t.data.period.click_rate_change_direction,!1),"detail"===t.viewName){jQuery("#skystats-mailchimp-industry-average-open-rate").html(t.data.period.industry_average_open_rate),jQuery("#skystats-mailchimp-industry-average-open-rate-change").html(t.data.period.industry_average_open_rate_change);var r=jQuery("#skystats-mailchimp-industry-average-open-rate-change-info");t.changeTooltipContent(r,t.data.period.previous_industry_average_open_rate+"% "+r.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-mailchimp-industry-average-open-rate-change-direction",t.data.period.industry_average_open_rate_change_direction,!1),setDataPointChangeClass("skystats-mailchimp-industry-average-open-rate-change",t.data.period.industry_average_open_rate_change_direction,!1),jQuery("#skystats-mailchimp-bounces").html(t.data.period.bounces),jQuery("#skystats-mailchimp-bounces-change").html(t.data.period.bounces_change);var c=jQuery("#skystats-mailchimp-bounces-change-info");t.changeTooltipContent(c,t.data.period.previous_bounces+" "+c.attr("data-tooltip-backup")),setDataPointChangeDirectionClass("skystats-mailchimp-bounces-change-direction",t.data.period.bounces_change_direction,!0),setDataPointChangeClass("skystats-mailchimp-bounces-change",t.data.period.bounces_change_direction,!0),function(){if(null!=t.data.period.top_campaigns){var a=jQuery("#skystats-mailchimp-top-campaigns-table"),e=a.parent(),o=e.parent(),i=a.find("tbody"),s=t.data.period.top_campaigns,n="";Object.keys(s).length?(i.html(""),jQuery.each(s,function(t,a){n+="<tr>"+"<td>"+a.name+" ("+a.id+")</td>"+"<td>"+a.unique_opens+"</td>"+"<td>"+a.unique_clicks+"</td>"+"<td>"+a.unsubscribed+"</td>"+"<td>"+a.open_rate+"%</td>"+"<td>"+a.click_rate+"%</td>"+"<td>"+a.send_time+"</td>"+"</tr>"}),jQuery(n).appendTo(i),a.show()):(a.hide(),t.$topCampaignsTableErrorContainer.show()),e.show(),o.show()}}(),function(){if(null!=t.data.period.top_lists){var a=jQuery("#skystats-mailchimp-top-lists-table"),e=a.parent(),o=e.parent(),i=a.find("tbody"),s=t.data.period.top_lists,n="";s.length?(i.html(""),jQuery.each(s,function(t,a){n+="<tr>"+"<td>"+a.name+" ("+a.id+")</td>"+"<td>"+a.open_rate+"%</td>"+"<td>"+a.click_rate+"%</td>"+"<td>"+a.subscribers+"</td>"+"<td>"+a.average_subscribe_rate+"%</td>"+"<td>"+a.average_unsubscribe_rate+"%</td>"+"</tr>"}),jQuery(n).appendTo(i),a.show()):(a.hide(),t.$topListsTableErrorContainer.show()),e.show(),o.show()}}()}t.enableGridIcon(),t.enableSettingsIcon(),t.loadingDataTabData=!1,t.viewingDataTab=!0})},MailChimp.prototype.loadSettingsTabData=function(t){"detail"===this.viewName&&this.$dataTableColumns.fadeOut(),this.$integrationErrorContainer.fadeOut(),this.hideChartFigure();var a=this,e="mashboard"===this.viewName?this.$dataPointsContainer.add(this.$chartContainer):this.$dataPointsContainer.add(this.$chartContainer).add(this.$dataTableColumnsContent);e.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.get(ajaxurl,{action:"skystats_ajax_mailchimp_api_query",query:"get_status",request_type:t},function(t){t=jQuery.parseJSON(t),a.displaySettingsTabData(t)})})})},MailChimp.prototype.displaySettingsTabData=function(t){var a=this;this.$integrationErrorContainer.fadeOut(),a.$loadingContainer.fadeOut(400,function(){if("success"===t.responseType)switch(t.responseContext){case"valid_access_token":a.$settingsTabValidAccessTokenSection.fadeIn(),a.$settingsTabDeauthorizeSection.fadeIn()}else switch(t.responseContext){case"authorization_required":a.$settingsTabAuthorizeSection.fadeIn();break;case"invalid_access_token":a.$settingsTabInvalidAcccessTokenSection.fadeIn(),a.$settingsTabDeauthorizeSection.fadeIn();break;default:a.$settingsTabDeauthorizeSection.fadeIn()}if(a.viewingSettingsTab=!0,a.loadingSettingsTabData=!1,null!=a.data&&a.enableSettingsIcon(),a.$settingsTabAuthorizeSection.is(":visible")){var e=jQuery("#skystats-mailchimp-authorize");e.off("click"),e.on("click",function(t){t.preventDefault(),null!=a.authPopupWindowIntervalId&&clearInterval(a.authPopupWindowIntervalId),a.createPopupWindow(a.authPopupWindowURL,"MailChimpAuthPopup",900,500,null),a.authPopupWindowIntervalId=setInterval(function(){try{(null==a.popupWindow||a.popupWindow.closed)&&clearInterval(a.authPopupWindowIntervalId),!a.popupWindow.location.hasOwnProperty("href")||a.authPopupWindowCompleteURL!==a.popupWindow.location.href&&a.authPopupWindowCompleteURL+"#"!==a.popupWindow.location.href||(a.popupWindow.close(),clearInterval(a.authPopupWindowIntervalId),a.$settingsTabSections.fadeOut(400).promise().done(function(){a.loadDataTabData()}))}catch(t){}},100)})}if(a.$settingsTabDeauthorizeSection.is(":visible")){var o=jQuery("#skystats-mailchimp-deauthorize");o.off("click"),o.on("click",function(t){t.preventDefault(),a.$integrationErrorContainer.fadeOut(),a.disableSettingsIcon(),a.$settingsTabSections.fadeOut(400).promise().done(function(){a.$loadingContainer.fadeIn(400,function(){jQuery.get(ajaxurl,{action:"skystats_ajax_mailchimp_api_query",query:"deauthorize"},function(){a.data=null,a.viewingSettingsTab=!1,a.loadingSettingsTabData=!0,a.loadSettingsTabData("fresh")})})})})}})},MailChimp.prototype.resizeChart=function(){null!=this.data&&(this.chartInstance.shutdown(),this.chartData[0].data=getChartData(this.data.chart_data.unique_opens,this.$chart,this,"daily"),this.chartData[1].data=getChartData(this.data.chart_data.unique_clicks,this.$chart,this,"daily"),this.chartInstance=this.$chart.plot(this.chartData,this.chartOptions).data("plot"))};